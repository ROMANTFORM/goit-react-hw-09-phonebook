(this["webpackJsonphm-9-hook"]=this["webpackJsonphm-9-hook"]||[]).push([[0],{51:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(23),s=n.n(a),o=(n(51),n(7)),u=n(14),i=n.n(u),l=n(19),b=n(15),j=n.n(b),m=n(3),O={registerRequest:Object(m.b)("auth/registerRequest"),registerSuccess:Object(m.b)("auth/registerSuccess"),registerError:Object(m.b)("auth/registerError"),loginRequest:Object(m.b)("auth/loginRequest"),loginSuccess:Object(m.b)("auth/loginSuccess"),loginError:Object(m.b)("auth/loginError"),logoutRequest:Object(m.b)("auth/logoutRequest"),logoutSuccess:Object(m.b)("auth/logoutSuccess"),logoutError:Object(m.b)("auth/logoutError"),getCurrentUserRequest:Object(m.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(m.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(m.b)("auth/getCurrentUserError")};j.a.defaults.baseURL="https://connections-api.herokuapp.com";var d=function(e){j.a.defaults.headers.common.Authorization="Bearer ".concat(e)},p=function(){j.a.defaults.headers.common.Authorization=""},h=n(5),f=(n(74),n(17)),x=n(2),g=n(9),v=n(20),C=n(1),N={email:"",password:""};var w=function(){var e=Object(h.c)(),t=Object(c.useState)(N),n=Object(v.a)(t,2),r=n[0],a=n[1],s=function(e){return function(t){a((function(n){return Object(g.a)(Object(g.a)({},n),{},Object(x.a)({},e,t.target.value))}))}},o=function(){a(N)};return Object(C.jsx)("div",{className:"Form-wrap",children:Object(C.jsxs)("form",{className:"Form",onSubmit:function(t){var n;t.preventDefault(),e((n=r,function(){var e=Object(l.a)(i.a.mark((function e(t){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O.loginRequest()),e.prev=1,e.next=4,j.a.post("/users/login",n);case 4:c=e.sent,d(c.data.token),t(O.loginSuccess(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(O.loginError(e.t0.message));case 12:case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())),o()},children:[Object(C.jsx)("h2",{className:"Form-title",children:"Log In!"}),Object(C.jsx)("p",{className:"Form-p",children:Object(C.jsxs)("label",{htmlFor:"Email",className:"floatLabel",children:["Email",Object(C.jsx)("input",{className:"Form-input",id:"Email",name:"Email",type:"text",value:r.email,onChange:s("email")})]})}),Object(C.jsx)("p",{children:Object(C.jsxs)("label",{htmlFor:"password",className:"floatLabel",children:["Password",Object(C.jsx)("input",{className:"Form-input",id:"password",name:"password",type:"password",value:r.password,onChange:s("password")})]})}),Object(C.jsx)("p",{children:Object(C.jsx)("button",{type:"submit",className:"Form-btn",children:"Log In!"})})]})})},y={name:"",email:"",password:""};var k=function(){var e=Object(h.c)(),t=Object(c.useState)(y),n=Object(v.a)(t,2),r=n[0],a=n[1],s=function(e){return function(t){a((function(n){return Object(g.a)(Object(g.a)({},n),{},Object(x.a)({},e,t.target.value))}))}};return Object(C.jsx)("div",{className:"Form-wrap",children:Object(C.jsxs)("form",{className:"Form",autoComplete:"off",onSubmit:function(t){var n;t.preventDefault(),e((n=r,function(){var e=Object(l.a)(i.a.mark((function e(t){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O.registerRequest()),e.prev=1,e.next=4,j.a.post("/users/signup",n);case 4:c=e.sent,d(c.data.token),t(O.registerSuccess(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(O.registerError(e.t0.message));case 12:case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())),a(y)},children:[Object(C.jsx)("h2",{className:"Form-title",children:"Sign Up"}),Object(C.jsx)("p",{children:Object(C.jsxs)("label",{htmlFor:"name",className:"floatLabel",children:["Name",Object(C.jsx)("input",{className:"Form-input",id:"name",name:"name",value:r.name,type:"text",onChange:s("name")})]})}),Object(C.jsx)("p",{className:"Form-p",children:Object(C.jsxs)("label",{htmlFor:"Email",className:"floatLabel",children:["Email",Object(C.jsx)("input",{className:"Form-input",id:"Email",name:"Email",value:r.email,type:"text",onChange:s("email")})]})}),Object(C.jsx)("p",{children:Object(C.jsxs)("label",{htmlFor:"password",className:"floatLabel",children:["Password",Object(C.jsx)("input",{className:"Form-input",id:"password",name:"password",value:r.password,type:"password",onChange:s("password")})]})}),Object(C.jsx)("p",{children:Object(C.jsx)("button",{type:"submit",className:"Form-btn",children:"Sign Up!"})})]})})};var S=function(){return Object(C.jsxs)("div",{className:"Auth-wrap",children:[Object(C.jsx)(f.b,{to:"/login",className:"link",activeClassName:"active-link",children:"Log In"}),Object(C.jsx)(f.b,{to:"/signup",className:"link",activeClassName:"active-link",children:"Sign up"})]})},E=function(e){return e.auth.isLogedIn},F=function(e){return e.auth.user.name},L=n.p+"static/media/default-avatar.4cff0967.webp",U={onLogout:function(){return function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O.logoutRequest()),e.prev=1,e.next=4,j.a.post("/users/logout");case 4:p(),t(O.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(O.logoutError(e.t0.message));case 11:case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}},R=Object(h.b)((function(e){return{name:F(e),avatar:L}}),U)((function(e){var t=e.avatar,n=e.name,c=e.onLogout;return Object(C.jsxs)("div",{className:"Nav-Container__right",children:[Object(C.jsx)("img",{src:t,alt:n,width:"32"}),Object(C.jsxs)("span",{className:"Span",children:["Hi, ",n]}),Object(C.jsx)("button",{type:"button",className:"logout-btn",onClick:c,children:"Logout"})]})}));var _=function(){var e=Object(h.d)(E);return Object(C.jsxs)("nav",{className:"Nav-wrap",children:[Object(C.jsxs)("div",{className:"Nav-menu",children:[Object(C.jsx)(f.b,{exact:!0,to:"/",className:"link",activeClassName:"active-link",children:"Home"}),Object(C.jsx)(f.b,{to:"/contacts",className:"link",activeClassName:"active-link",children:"Contacts"})]}),Object(C.jsx)("div",{className:"User-menu",children:e?Object(C.jsx)(R,{}):Object(C.jsx)(S,{})})]})};var q=function(){return Object(C.jsxs)("div",{className:"Home-wrap",children:[Object(C.jsx)("h2",{className:"Home-wrap__title",children:"wellcome!"}),Object(C.jsx)("h3",{className:"Home-wrap__subtitle",children:"Log in and use your Contacts"})]})},A=n(41),T=n(42),I=n(46),D=n(45),H=Object(m.b)("fetchContactsRequest"),z=Object(m.b)("fetchContactsSucces"),B=Object(m.b)("fetchContactsError"),J=Object(m.b)("addContactsRequest"),M=Object(m.b)("addContactsSucces"),P=Object(m.b)("addContactsError"),G=Object(m.b)("deleteContactsRequest"),K=Object(m.b)("deleteContactsSucces"),Q=Object(m.b)("deleteContactsError"),V=Object(m.b)("fitlerContact"),W={name:"",number:""};var X=function(){var e=Object(h.c)(),t=Object(c.useState)(W),n=Object(v.a)(t,2),r=n[0],a=n[1],s=function(e){return function(t){a((function(n){return Object(g.a)(Object(g.a)({},n),{},Object(x.a)({},e,t.target.value))}))}},o=function(){a(W)};return Object(C.jsx)("div",{className:"Contacts-wrap",children:Object(C.jsxs)("form",{className:"Form",onSubmit:function(t){t.preventDefault(),e(function(e){var t=e.name,n=e.number;return function(e){var c={name:t,number:n};e(J()),j.a.post("/contacts",c).then((function(t){var n=t.data;return e(M(n))})).catch((function(t){return e(P(t.message))}))}}(r)),o()},children:[Object(C.jsx)("h2",{className:"Form-title",children:"Add new Contact!"}),Object(C.jsx)("p",{className:"Form-p",children:Object(C.jsxs)("label",{htmlFor:"name",className:"floatLabel",children:["Name",Object(C.jsx)("input",{className:"Form-input",id:"name",name:"name",type:"text",value:r.name,onChange:s("name")})]})}),Object(C.jsx)("p",{children:Object(C.jsxs)("label",{htmlFor:"number",className:"floatLabel",children:["Number",Object(C.jsx)("input",{className:"Form-input",id:"number",name:"number",type:"text",value:r.number,onChange:s("number")})]})}),Object(C.jsx)("p",{children:Object(C.jsx)("button",{type:"submit",className:"Contact-form-btn",children:"Add Contact"})})]})})},Y=n(24),Z=function(e){return e.contacts.filter},$=Object(Y.a)([Z,function(e){return e.contacts.items}],(function(e,t){var n=e.toLowerCase();return t.filter((function(e){return e.name.toLowerCase().includes(n)}))}));var ee=function(){var e=Object(h.c)(),t=Object(h.d)($),n=function(t){return e((n=t,function(e){e(G()),j.a.delete("/contacts/".concat(n)).then((function(t){return e(K(n))})).catch((function(t){return e(Q(t.message))}))}));var n};return Object(C.jsx)("div",{className:"Contact-list-wrap",children:Object(C.jsx)("ul",{className:"Contact-container__list",children:t.map((function(e){return Object(C.jsxs)("li",{className:"Contact-container__item",children:[e.name,": ",e.number,Object(C.jsx)("button",{onClick:function(){return n(e.id)},className:"Contact-list__btn",children:"Delete"})]},e.id)}))})})},te=Object(h.b)((function(e){return{value:Z(e)}}),(function(e){return{onChange:function(t){return e(V(t.target.value))}}}))((function(e){var t=e.value,n=e.onChange;return Object(C.jsxs)("div",{className:"Filter-container",children:[Object(C.jsx)("h3",{children:"Find contact by name"}),Object(C.jsx)("label",{children:Object(C.jsx)("input",{className:"Filter-input",name:"search",type:"text",value:t,onChange:n})})]})})),ne=function(e){Object(I.a)(n,e);var t=Object(D.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchContacts()}},{key:"render",value:function(){return Object(C.jsxs)("div",{className:"Contact-container",children:[Object(C.jsx)("div",{className:"Contact-form__wrapper",children:Object(C.jsx)(X,{})}),Object(C.jsxs)("div",{className:"Contact-list__wrapper",children:[Object(C.jsx)("h2",{children:"Contacts"}),Object(C.jsx)(te,{}),Object(C.jsx)(ee,{})]})]})}}]),n}(c.Component),ce=Object(h.b)(null,(function(e){return{fetchContacts:function(){return e(function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(H()),e.prev=1,e.next=4,j.a.get("/contacts");case 4:n=e.sent,c=n.data,t(z(c)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(B(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}}}))(ne),re=n(28),ae=["component","isAuthenticated","redirectTo"],se=Object(h.b)((function(e){return{isAuthenticated:E(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,c=e.redirectTo,r=Object(re.a)(e,ae);return Object(C.jsx)(o.b,Object(g.a)(Object(g.a)({},r),{},{render:function(e){return n?Object(C.jsx)(t,Object(g.a)({},e)):Object(C.jsx)(o.a,{to:c})}}))})),oe=["component","isAuthenticated","redirectTo"],ue=Object(h.b)((function(e){return{isAuthenticated:E(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,c=e.redirectTo,r=Object(re.a)(e,oe);return Object(C.jsx)(o.b,Object(g.a)(Object(g.a)({},r),{},{render:function(e){return n&&r.restricted?Object(C.jsx)(o.a,{to:c}):Object(C.jsx)(t,Object(g.a)({},e))}}))}));var ie,le,be,je,me,Oe,de=function(){var e=Object(h.c)();return Object(c.useEffect)((function(){e(function(){var e=Object(l.a)(i.a.mark((function e(t,n){var c,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n(),r=c.auth.token){e.next=3;break}return e.abrupt("return");case 3:return d(r),t(O.getCurrentUserRequest()),e.prev=6,e.next=9,j.a.get("/users/current");case 9:a=e.sent,t(O.getCurrentUserSuccess(a.data)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),t(O.getCurrentUserError(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n){return e.apply(this,arguments)}}())}),[e]),Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(_,{}),Object(C.jsxs)(o.d,{children:[Object(C.jsx)(ue,{exact:!0,path:"/",component:q}),Object(C.jsx)(se,{path:"/contacts",component:ce,restricted:!0,redirectTo:"/login"}),Object(C.jsx)(ue,{path:"/login",component:w,restricted:!0,redirectTo:"/contacts"}),Object(C.jsx)(ue,{path:"/signup",component:k,restricted:!0,redirectTo:"/contacts"})]})]})},pe=n(27),he=n(43),fe=n.n(he),xe=n(8),ge={name:null,email:null},ve=Object(m.c)(ge,(ie={},Object(x.a)(ie,O.registerSuccess,(function(e,t){return t.payload.user})),Object(x.a)(ie,O.loginSuccess,(function(e,t){return t.payload.user})),Object(x.a)(ie,O.logoutSuccess,(function(){return ge})),Object(x.a)(ie,O.getCurrentUserSuccess,(function(e,t){return t.payload})),ie)),Ce=Object(m.c)(null,(le={},Object(x.a)(le,O.registerSuccess,(function(e,t){return t.payload.token})),Object(x.a)(le,O.loginSuccess,(function(e,t){return t.payload.token})),Object(x.a)(le,O.logoutSuccess,(function(){return null})),le)),Ne=Object(m.c)(null,(be={},Object(x.a)(be,O.registerError,(function(e,t){return t.payload})),Object(x.a)(be,O.loginError,(function(e,t){return t.payload})),Object(x.a)(be,O.logoutError,(function(e,t){return t.payload})),Object(x.a)(be,O.getCurrentUserError,(function(e,t){return t.payload})),be)),we=Object(m.c)(!1,(je={},Object(x.a)(je,O.registerSuccess,(function(){return!0})),Object(x.a)(je,O.loginSuccess,(function(){return!0})),Object(x.a)(je,O.getCurrentUserSuccess,(function(){return!0})),Object(x.a)(je,O.registerError,(function(){return!1})),Object(x.a)(je,O.loginError,(function(){return!1})),Object(x.a)(je,O.getCurrentUserError,(function(){return!1})),Object(x.a)(je,O.logoutSuccess,(function(){return!1})),je)),ye=Object(xe.b)({user:ve,token:Ce,isLogedIn:we,error:Ne}),ke=Object(m.c)([],(me={},Object(x.a)(me,z,(function(e,t){return t.payload})),Object(x.a)(me,M,(function(e,t){var n=e.map((function(e){return e.name.toLowerCase()}));return console.log(n),n.includes(t.payload.name.toLowerCase())?alert("This contact is already in your list!"):[t.payload].concat(Object(pe.a)(e))})),Object(x.a)(me,K,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),me)),Se=Object(m.c)("",Object(x.a)({},V,(function(e,t){return t.payload}))),Ee=Object(m.c)(!1,(Oe={},Object(x.a)(Oe,H,(function(){return!0})),Object(x.a)(Oe,z,(function(){return!1})),Object(x.a)(Oe,B,(function(){return!1})),Object(x.a)(Oe,J,(function(){return!0})),Object(x.a)(Oe,M,(function(){return!1})),Object(x.a)(Oe,P,(function(){return!1})),Object(x.a)(Oe,G,(function(){return!0})),Object(x.a)(Oe,K,(function(){return!1})),Object(x.a)(Oe,Q,(function(){return!1})),Oe)),Fe=Object(xe.b)({items:ke,filter:Se,loading:Ee}),Le=n(18),Ue=Object(pe.a)(Object(m.d)({serializableCheck:{ignoredActions:[Le.a,Le.f,Le.b,Le.c,Le.d,Le.e]}})),Re={key:"auth",storage:fe.a,whitelist:["token"]},_e=Object(m.a)({reducer:{auth:Object(Le.g)(Re,ye),contacts:Fe},middleware:Ue,devTools:!1}),qe={store:_e,persistor:Object(Le.h)(_e)},Ae=n(44);s.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(h.a,{store:qe.store,children:Object(C.jsx)(Ae.a,{loading:null,persistor:qe.persistor,children:Object(C.jsx)(f.a,{children:Object(C.jsx)(de,{})})})})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.94bf70ee.chunk.js.map